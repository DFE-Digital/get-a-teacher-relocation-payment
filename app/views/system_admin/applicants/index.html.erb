<%= govuk_table(html_attributes: {style: 'font-size: 18px'}) do |table|
      table.with_caption(size: 'm', text: 'List of Applications')
      table.with_head do |head|
        head.with_row do |row|
          row.with_cell(text: 'URN', html_attributes: {style: 'vertical-align: middle;'})
          row.with_cell(text: 'Name', html_attributes: {style: 'vertical-align: middle;'})
          row.with_cell(text: 'Submitted', html_attributes: {style: 'width: 100px; vertical-align: middle;'})
          row.with_cell(text: 'Initial Checks', html_attributes: {style: 'width: 100px; vertical-align: middle;'})
          row.with_cell(text: 'Home Office Checks', html_attributes: {style: 'width: 100px; vertical-align: middle;'})
          row.with_cell(text: 'School Checks', html_attributes: {style: 'width: 100px; vertical-align: middle;'})
          row.with_cell(text: 'Banking Approved', html_attributes: {style: 'width: 100px; vertical-align: middle;'})
          row.with_cell(text: 'Rejected', html_attributes: {style: 'width: 100px; vertical-align: middle;'})
        end
      end 

      table.with_body do |body|
        @applications.each do |application|
          body.with_row do |row|
            row.with_cell(text: govuk_link_to(application.urn, applicant_path(application.applicant)))
            row.with_cell(text: application.applicant.full_name)
            row.with_cell(text: application.applicant.email_address)
            row.with_cell(text: application.applicant.passport_number)
            row.with_cell(text: application.application_progress.created_at&.to_date&.to_fs(:govuk_date_and_time))
            row.with_cell(text: application.application_progress.initial_checks_completed_at&.to_fs(:govuk_date_and_time))
            row.with_cell(text: application.application_progress.home_office_checks_completed_at&.to_fs(:govuk_date_and_time))
            row.with_cell(text: application.application_progress.school_checks_completed_at&.to_fs(:govuk_date_and_time))
            row.with_cell(text: application.application_progress.payment_completed_at&.to_fs(:govuk_date_and_time))
            row.with_cell(text: application.application_progress.rejection_completed_at&.to_fs(:govuk_date_and_time))
          end 
        end 
      end
 end %>
<%= govuk_pagination(pagy: @pagy) %>
